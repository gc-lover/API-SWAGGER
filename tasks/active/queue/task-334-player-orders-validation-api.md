# Task ID: API-TASK-WORLD-PO-Validation
**–¢–∏–ø:** API Generation  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** queued  
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-08 12:45  
**–°–æ–∑–¥–∞—Ç–µ–ª—å:** GPT-5 Codex  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** API-TASK-SOC-PO-Create, API-TASK-ECON-PO-Budget

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–°–æ–∑–¥–∞—Ç—å OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é `world-service`, –æ–ø–∏—Å—ã–≤–∞—é—â—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –∑–∞–∫–∞–∑–æ–≤ –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –∑–æ–Ω–∞–º, –ø—Ä–∞–≤–æ–≤—ã–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º, —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ —Ñ—Ä–∞–∫—Ü–∏–π –∏ —É—Ä–æ–≤–Ω—é —Ä–∏—Å–∫–∞.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:** –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å `api/v1/world/player-orders/validation.yaml` —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º REST endpoints –∏ –º–æ–¥–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ social-service –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π –∑–∞–∫–∞–∑–∞ –∏ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –±—Ä–∏—Ñ–∞ –≤ –º–∞—Å—Ç–µ—Ä–µ.

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–¥–∏–Ω—ã–π –≤–∞–ª–∏–¥–∞—Ç–æ—Ä –º–∏—Ä–æ–≤—ã—Ö –∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∑–∞–∫–∞–∑–æ–≤, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã –∏ –Ω–∞—Ä—É—à–∏—Ç–µ–ª–µ–π —Å–∞–Ω–∫—Ü–∏–π.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–∫–∞–∑–æ–≤ –ø—Ä–∞–≤–æ–≤—ã–º –Ω–æ—Ä–º–∞–º –∏ —Ñ—Ä–∞–∫—Ü–∏–æ–Ω–Ω—ã–º –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º.
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –º–∞—Å—Ç–µ—Ä–∞ (Draft ‚Üí Review ‚Üí Publish).
- –°–Ω–∏–∑–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É social-service, –≤—ã–Ω–µ—Å—è —Å–ª–æ–∂–Ω—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞ –≤ world-service.

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `.BRAIN`  
**–ü—É—Ç—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç—É:** `.BRAIN/_02-gameplay/social/player-orders-creation-–¥–µ—Ç–∞–ª—å–Ω–æ.md`  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0.0  
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-11-08 09:53  
**–°—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞:** approved  

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- –ü—Ä–æ–≤–µ—Ä–∫–∏: —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä, —Å–∞–Ω–∫—Ü–∏–∏, —Ç–æ–∫—Å–∏—á–Ω–∞—è –ª–µ–∫—Å–∏–∫–∞, —Ä–∏—Å–∫ –∑–æ–Ω, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±—é–¥–∂–µ—Ç—É.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: world-service (—Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏, –ø—Ä–∞–≤–æ–≤–æ–π —Å—Ç–∞—Ç—É—Å), factions-service (—Ä–µ–ø—É—Ç–∞—Ü–∏—è), content-service (—Ç–æ–∫—Å–∏—á–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏).
- Kafka —Å–æ–±—ã—Ç–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö: `social.player-orders.validation.failed`.
- UX: –º–∞—Å—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å —ç—Ç–∞–ø –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –≤—ã–¥–∞–≤–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ –æ—à–∏–±–∫–∞–º.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

- `.BRAIN/_02-gameplay/social/player-orders-system-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äî –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤.
- `.BRAIN/_02-gameplay/social/player-orders-world-impact-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äî –≤–ª–∏—è–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –Ω–∞ –º–∏—Ä –∏ —Ñ—Ä–∞–∫—Ü–∏–∏.
- `.BRAIN/_02-gameplay/social/relationships-system-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äî –∞–¥—Ä–µ—Å–Ω—ã–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è, —É—Ä–æ–≤–Ω–∏ –¥–æ–≤–µ—Ä–∏—è.
- `.BRAIN/_02-gameplay/social/player-orders-reputation-–¥–µ—Ç–∞–ª—å–Ω–æ.md` ‚Äî –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π.
- JSON —Å—Ö–µ–º—ã: `schemas/social/player-order-validation.schema.json`, `schemas/social/player-order-create.schema.json`.
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏: `api/v1/social/player-orders.yaml`, `api/v1/world/cities/population.yaml` (–ø—Ä–∏–º–µ—Ä —Å—Ç–∏–ª—è world-service).

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [player-orders-creation-–¥–µ—Ç–∞–ª—å–Ω–æ](../../../../.BRAIN/_02-gameplay/social/player-orders-creation-–¥–µ—Ç–∞–ª—å–Ω–æ.md)
- [player-orders-world-impact-–¥–µ—Ç–∞–ª—å–Ω–æ](../../../../.BRAIN/_02-gameplay/social/player-orders-world-impact-–¥–µ—Ç–∞–ª—å–Ω–æ.md)
- [relationships-system-–¥–µ—Ç–∞–ª—å–Ω–æ](../../../../.BRAIN/_02-gameplay/social/relationships-system-–¥–µ—Ç–∞–ª—å–Ω–æ.md)
- [player-orders-reputation-–¥–µ—Ç–∞–ª—å–Ω–æ](../../../../.BRAIN/_02-gameplay/social/player-orders-reputation-–¥–µ—Ç–∞–ª—å–Ω–æ.md)

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `API-SWAGGER`  
**–¶–µ–ª–µ–≤–æ–π —Ñ–∞–π–ª:** `api/v1/world/player-orders/validation.yaml`  
**API –≤–µ—Ä—Å–∏—è:** v1  
**–¢–∏–ø —Ñ–∞–π–ª–∞:** OpenAPI 3.0.3 (YAML)

```
API-SWAGGER/
‚îî‚îÄ‚îÄ api/
    ‚îî‚îÄ‚îÄ v1/
        ‚îî‚îÄ‚îÄ world/
            ‚îî‚îÄ‚îÄ player-orders/
                ‚îú‚îÄ‚îÄ validation.yaml        ‚Üê —Å–æ–∑–¥–∞—Ç—å
                ‚îî‚îÄ‚îÄ validation-components.yaml (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, ‚â§400 —Å—Ç—Ä–æ–∫)
```

---

## üèóÔ∏è –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

### Backend (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å)
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** world-service  
- **–ü–æ—Ä—Ç:** 8086  
- **API Base Path:** `/api/v1/world/player-orders/*`  
- **–î–æ–º–µ–Ω:** –ì–µ–æ–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ, —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –∏ —Å—Ä–µ–¥–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏.  
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** factions-service (—Ä–µ–ø—É—Ç–∞—Ü–∏—è), economy-service (–±—é–¥–∂–µ—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã), content-service (NLP —Ñ–∏–ª—å—Ç—Ä), telemetry-service (–∞—É–¥–∏—Ç), auth-service (scopes).

### Frontend (–º–æ–¥—É–ª—å)
- **–ú–æ–¥—É–ª—å:** `modules/social/player-orders`  
- **–ü—É—Ç—å:** `modules/social/player-orders/validation`  
- **State Store:** `useSocialStore` (`playerOrders.validationState`)  
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (@shared/ui):** `ValidationSummary`, `ViolationList`, `RiskBadge`, `PolicyReferenceLink`  
- **–§–æ—Ä–º—ã (@shared/forms):** `OrderValidationForm`, `InviteeWhitelistForm`  
- **Layouts:** `GameLayout`  
- **–•—É–∫–∏:** `useWorldPolicies`, `useRealtime`, `useDebounce`

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ OpenAPI:
```
# Target Architecture:
# - Microservice: world-service (port 8086)
# - Base Path: /api/v1/world/player-orders/*
# - Frontend Module: modules/social/player-orders/validation
# - UI: ValidationSummary, ViolationList, RiskBadge
# - Forms: OrderValidationForm, InviteeWhitelistForm
# - Hooks: useWorldPolicies, useRealtime
# - Integrations: factions-service, content-service
```

---

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å (–¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω)

### –®–∞–≥ 1: –°–±–æ—Ä —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
1. –ö–∞—Ç–∞–ª–æ–≥–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä, —Å–∞–Ω–∫—Ü–∏–∏, —Ç–æ–∫—Å–∏—á–Ω—ã–π —Ç–µ–∫—Å—Ç, –∑–æ–Ω—ã —Ä–∏—Å–∫–∞).
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —É—Ä–æ–≤–Ω–∏ —Å–µ—Ä—å—ë–∑–Ω–æ—Å—Ç–∏ (error, warning, info) –∏ –∫–æ–¥—ã –Ω–∞—Ä—É—à–µ–Ω–∏–π.
3. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ audit trail (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–≤–µ—Ä–æ–∫, —Ç–∞–π–º—Å—Ç–µ–º–ø—ã, –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö).

### –®–∞–≥ 2: –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å endpoints
–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä:
1. `POST /world/player-orders/validation/full` ‚Äî –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—á—ë—Ç).
2. `POST /world/player-orders/validation/location` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–æ–Ω, –ø—Ä–∞–≤–æ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞, –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å–æ–±—ã—Ç–∏–π.
3. `POST /world/player-orders/validation/factions` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–Ω–∫—Ü–∏–π, —Ä–µ–ø—É—Ç–∞—Ü–∏–æ–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.
4. `POST /world/player-orders/validation/content` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫—Å–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫, –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤.
5. `GET /world/player-orders/validation/policies` ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ–ª–∏—Ç–∏–∫ –∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–æ–Ω (—Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º).
6. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `POST /world/player-orders/validation/preview` ‚Äî –ª—ë–≥–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π.

### –®–∞–≥ 3: –û–ø–∏—Å–∞—Ç—å –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- `PlayerOrderValidationRequest` ‚Äî –æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ (–±—Ä–∏—Ñ, —Ü–µ–ª–∏, —É—á–∞—Å—Ç–Ω–∏–∫–∏, –±—é–¥–∂–µ—Ç, —à–∞–±–ª–æ–Ω, —Ä–µ–≥–∏–æ–Ω).
- `ValidationResult` ‚Äî –º–∞—Å—Å–∏–≤ `violations[]`, `warnings[]`, `recommendations[]`.
- `Violation` ‚Äî `code`, `severity`, `message`, `source`, `affectedFields`, `mitigation`.
- `ZonePolicy` / `PolicyVersion` ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏.
- `FactionRestriction` ‚Äî —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–æ–≤–µ—Ä–∏—è, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥, –Ω–∞–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–∞–Ω–∫—Ü–∏–∏.
- `ContentCheckResult` ‚Äî –¥–µ—Ç–µ–∫—Ç–æ—Ä —Ç–æ–∫—Å–∏—á–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π.
- `ValidationMetrics` ‚Äî –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –≤–µ—Ä—Å–∏–∏ –ø—Ä–∞–≤–∏–ª.

### –®–∞–≥ 4: –°–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é
1. `openapi: 3.0.3`, `info`, `servers` (prod/staging).  
2. `securitySchemes` ‚Üí `shared/common/security.yaml` + scopes `world.player-orders.read`, `world.player-orders.validate`.  
3. `tags`: `Player Order Validation`, `Zone Policies`, `Faction Compliance`.  
4. `paths`: –æ–ø–∏—Å–∞—Ç—å –≤—Å–µ endpoints, –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤, `operationId`.  
5. –í `components` —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å —Å—Ö–µ–º—ã, –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è (`ValidationSeverity`, `ViolationCode`).  
6. –î–æ–±–∞–≤–∏—Ç—å `x-kafka-topics`:  
   - `world.player-orders.validation.completed`  
   - `world.player-orders.validation.failed`  
   - `world.player-orders.policies.updated`

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∏
1. `npx swagger-cli validate api/v1/world/player-orders/validation.yaml`.  
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ JSON —Å—Ö–µ–º–µ (`player-order-validation.schema.json`).  
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –æ—à–∏–±–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `shared/common/responses.yaml`.  
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ‚â§400 —Å—Ç—Ä–æ–∫ (–∏–Ω–∞—á–µ —Ä–∞–∑–¥–µ–ª–∏—Ç—å).  
5. –ü—Ä–æ–π—Ç–∏ —á–µ–∫–ª–∏—Å—Ç `tasks/config/checklist.md`.

---

## üß© Endpoints (–¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è)

1. **POST `/api/v1/world/player-orders/validation/full`**  
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –∑–∞–∫–∞–∑–∞ (–∑–æ–Ω—ã, —Å–∞–Ω–∫—Ü–∏–∏, –∫–æ–Ω—Ç–µ–Ω—Ç, –±—é–¥–∂–µ—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è).  
   - **Request Body:** `PlayerOrderValidationRequest` (includes brief, budget, participants).  
   - **Response `200`:** `PlayerOrderValidationReport` (violations, warnings, metrics).  
   - **–û—à–∏–±–∫–∏:** `400` (–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ), `401`, `403`, `409` (–∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ–ª–∏—Ç–∏–∫), `500`.  
   - **–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `recommendations[]` –¥–ª—è UI.  

2. **POST `/api/v1/world/player-orders/validation/location`**  
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–æ–≤–æ–π —Å—Ç–∞—Ç—É—Å –∑–æ–Ω, –Ω–∞–ª–∏—á–∏–µ –±–æ–µ–≤—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫.  
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Ç–µ–ª–µ: `locationId`, `zoneTier`, `timeWindow`, `hazardLevel`.  
   - –û—Ç–≤–µ—Ç: `LocationValidationResult` c `restrictedReasons`.  

3. **POST `/api/v1/world/player-orders/validation/factions`**  
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–Ω–∫—Ü–∏–π, –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ä–µ–ø—É—Ç–∞—Ü–∏–π, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –¥–æ–≤–µ—Ä–∏—è –¥–ª—è –∞–¥—Ä–µ—Å–Ω—ã—Ö –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π.  
   - –í —Ç–µ–ª–µ: –º–∞—Å—Å–∏–≤ `invitees[]`, `factionCodes[]`, `requiredTrust`.  
   - –û—Ç–≤–µ—Ç: `FactionValidationResult` (–Ω–∞—Ä—É—à–µ–Ω–∏—è, —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–º–µ–Ω—ã).  

4. **POST `/api/v1/world/player-orders/validation/content`**  
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç NLP —Ñ–∏–ª—å—Ç—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (`content-service`).  
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `ContentCheckResult` —Å `toxicityScore`, `blockedTerms`.  
   - –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏: `422` (–æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã).  

5. **GET `/api/v1/world/player-orders/validation/policies`**  
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ–ª–∏—Ç–∏–∫ (`PolicyVersionList`).  
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: `zone`, `faction`, `effectiveAt`.  
   - –û—Ç–≤–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç `etag`/`version` –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.  

6. **POST `/api/v1/world/player-orders/validation/preview`**  
   - –õ—ë–≥–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–±–µ–∑ —Ç—è–∂—ë–ª—ã—Ö —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–≤).  
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ `warnings` –∏ `preflightViolations`.  

---

## üß± –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

- `PlayerOrderValidationRequest`: –ø–æ–ª—è `orderId?`, `ownerId`, `brief`, `objectives[]`, `budget`, `templateId`, `location`, `invitees`, `documents[]`.  
- `PlayerOrderValidationReport`: `status`, `violations[]`, `warnings[]`, `metrics`, `policyVersion`, `nextReviewAt`.  
- `Violation`: `code`, `severity`, `message`, `source`, `affectedFields`, `links`.  
- `ValidationSeverity` enum: `critical`, `high`, `medium`, `low`.  
- `LocationValidationResult`: `zoneStatus`, `restrictedReasons[]`, `legalReferences[]`.  
- `FactionValidationResult`: `blockedInvitees[]`, `requiredTrust`, `diplomaticWarnings[]`.  
- `ContentCheckResult`: `toxicityScore`, `blockedTerms[]`, `replacementSuggestions[]`.  
- `PolicyVersion`: `policyId`, `version`, `publishedAt`, `checksum`.  
- `ValidationMetrics`: `durationMs`, `rulesEvaluated`, `externalSources[]`.  
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–∫–∞–∑–∞, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ —É—Å–ø–µ—à–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

---

## üìå –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ø—Ä–∞–≤–∏–ª–∞

- –ü—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è `API-SWAGGER/api-swagger-rules` (‚â§400 —Å—Ç—Ä–æ–∫, $ref).
- –í—Å–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∏–∑ `shared/common/responses.yaml`.
- Security: `BearerAuth` + scopes (`world.player-orders.read`, `world.player-orders.validate`).  
- –°–æ–±–ª—é–¥–∞—Ç—å SOLID/DRY: –≤—ã–Ω–µ—Å—Ç–∏ –æ–±—â–∏–µ —Å—Ö–µ–º—ã –≤ `validation-components.yaml`, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ.
- –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏–∏ –ø–æ–ª–∏—Ç–∏–∫ (`policyVersion`) –≤ –æ—Ç–≤–µ—Ç–∞—Ö.
- –û–ø–∏—Å–∞—Ç—å `x-kafka-topics` —Å payload —Å—Ö–µ–º–∞–º–∏.
- –î–æ–±–∞–≤–∏—Ç—å —É–∫–∞–∑–∞–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ telemetry-service (`x-audit` extension ‚Äî –æ–ø–∏—Å–∞—Ç—å –≤ —Ç–µ–∫—Å—Ç–µ).

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

1. –í—Å–µ —à–µ—Å—Ç—å endpoints –æ–ø–∏—Å–∞–Ω—ã, –≤–∫–ª—é—á–∞—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –æ—Ç–≤–µ—Ç—ã.
2. –í `PlayerOrderValidationReport` –µ—Å—Ç—å –ø–æ–ª—è `violations`, `warnings`, `metrics`, `policyVersion`.
3. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å—Ö–µ–º—ã `Violation`, `ValidationSeverity`, `ViolationCode`.
4. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã (`example`) –º–∏–Ω–∏–º—É–º –¥–ª—è `full` –∏ `content` –æ–ø–µ—Ä–∞—Ü–∏–π.
5. –ü–æ–¥–∫–ª—é—á–µ–Ω—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (401, 403, 404, 409, 422, 500) —á–µ—Ä–µ–∑ `$ref`.
6. –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã Kafka —Å–æ–±—ã—Ç–∏—è –≤ `x-kafka-topics` –∏ payload —Å—Ö–µ–º—ã.
7. –ü—Ä–æ–ø–∏—Å–∞–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Ä–æ–ª—è–º (`world.validator`, `social-service`).
8. –§–∞–π–ª –ø—Ä–æ—Ö–æ–¥–∏—Ç `npx swagger-cli validate` –±–µ–∑ –æ—à–∏–±–æ–∫.
9. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ ‚â§400 —Å—Ç—Ä–æ–∫ –∏–ª–∏ —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–æ–≥–∏—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.
10. –£–∫–∞–∑–∞–Ω `policyVersion` –∏ –º–µ—Ö–∞–Ω–∏–∑–º –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è (`ETag`, `Cache-Control`) –≤ –æ—Ç–≤–µ—Ç–∞—Ö —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞.
11. FAQ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Ç–∏–ø–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

---

## ‚ùì FAQ

- **Q:** –ù—É–∂–Ω–æ –ª–∏ world-service —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å content-service?  
  **A:** –î–∞, world-service –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–ø–∏—Å–∞—Ç—å, —á—Ç–æ `contentCheck` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `toxicityScore`.

- **Q:** –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫?  
  **A:** –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ `policies` –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è Kafka `world.player-orders.policies.updated`; UI –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ `policyVersion`.

- **Q:** –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º –Ω–∞—Ä—É—à–µ–Ω–∏–∏?  
  **A:** Endpoint `validation/full` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `status: failed` –∏ —Å–ø–∏—Å–æ–∫ `violations` —Å `severity=critical`; social-service –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏—é.

- **Q:** –¢—Ä–µ–±—É–µ—Ç—Å—è –ª–∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π?  
  **A:** –î–∞, `message` ‚Äî –∫–ª—é—á –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏. –í –æ—Ç–≤–µ—Ç–µ —É–∫–∞–∑—ã–≤–∞—Ç—å `defaultMessage` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ `messageKey` –¥–ª—è UI.

- **Q:** –ú–æ–∂–Ω–æ –ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∏ —á–µ—Ä–Ω–æ–≤–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏?  
  **A:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/validation/preview`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ soft warnings –∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ.

---

## üß≠ –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- 2025-11-08 12:45 ‚Äî –∑–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞ (GPT-5 Codex), —Å—Ç–∞—Ç—É—Å `queued`.

---

**–°–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:** –ü–æ—Å–ª–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–∏—Ç—å `brain-mapping.yaml`, –¥–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–æ–º `.BRAIN/_02-gameplay/social/player-orders-creation-–¥–µ—Ç–∞–ª—å–Ω–æ.md`, —É–≤–µ–¥–æ–º–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã social –∏ economy –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞—Ö.

