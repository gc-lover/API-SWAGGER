# Task ID: API-TASK-215
**–¢–∏–ø:** API Generation
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π
**–°—Ç–∞—Ç—É—Å:** queued
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-08 01:52
**–°–æ–∑–¥–∞—Ç–µ–ª—å:** GPT-5 Codex (API Task Creator)
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** API-TASK-129, API-TASK-214

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–†–∞—Å—à–∏—Ä–∏—Ç—å API —Å–∏—Å—Ç–µ–º—ã –ª—É—Ç–∞, –¥–æ–±–∞–≤–∏–≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –º–µ—Ö–∞–Ω–∏–∫ Part 2: roll-—Å–∏—Å—Ç–µ–º–∞ Need/Greed, smart loot, boss loot, bad luck protection, –∞–Ω—Ç–∏-–¥—é–ø—ã, –∏—Å—Ç–æ—Ä–∏—è –∏ –∞–≤—Ç–æ–ª—É—Ç.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:** –°–æ–∑–¥–∞—Ç—å `api/v1/loot/loot-advanced.yaml`, –æ–ø–∏—Å–∞–≤ REST –∏ —Å–æ–±—ã—Ç–∏–π–Ωy–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ª—É—Ç–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª–ª–∞–º–∏ –∏ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ smart loot.

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–û–±–µ—Å–ø–µ—á–∏—Ç—å —á–µ—Å—Ç–Ω–æ–µ –∏ –≥–∏–±–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ–±—ã—á–∏ –≤ –≥—Ä—É–ø–ø–∞—Ö –∏ —Å–æ–ª–æ, —Å–Ω–∏–∑–∏–≤ —Ñ–∞–∫—Ç–æ—Ä—ã —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –∏ —Ñ—Ä—É—Å—Ç—Ä–∞—Ü–∏–∏.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∫–∏ Need/Greed/Priority rolls
- –ü–æ–≤—ã—Å–∏—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –¥–æ–±—ã—á–∏ —á–µ—Ä–µ–∑ smart loot –∏ –≥–∞—Ä–∞–Ω—Ç–∏–∏
- –£–ø—Ä–∞–≤–ª—è—Ç—å –±–æ—Åc–æ–≤—ã–º–∏ –Ω–∞–≥—Ä–∞–¥–∞–º–∏, –∑–∞—â–∏—Ç–æ–π –æ—Ç –Ω–µ–≤–µ–∑–µ–Ω–∏—è –∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –ª—É—Ç–∞ —Å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—ë–º, –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–µ–π, –∞—á–∏–≤–∫–∞–º–∏

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç

**–ü—É—Ç—å:** `.BRAIN/05-technical/backend/loot-system/part2-advanced-loot.md`
**–í–µ—Ä—Å–∏—è:** v1.0.1 (2025-11-07 02:19)
**–°—Ç–∞—Ç—É—Å:** approved, api-readiness: ready

**–ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü `loot_rolls`, —Å—Ç–∞—Ç—É—Å PENDING/COMPLETED
- Smart Loot Service (class/spec —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å)
- Boss loot –≥–∞—Ä–∞–Ω—Ç–∏–∏, party distribution, achievements
- Anti-duplicate, bad luck protection, legendary –≥–∞—Ä–∞–Ω—Ç–∏—è
- API endpoints summary (rolls, settings, history)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

- `.BRAIN/05-technical/backend/loot-system/part1-loot-generation.md`
- `.BRAIN/05-technical/backend/inventory-system/part2-advanced-features.md`
- `.BRAIN/05-technical/backend/party-system.md`
- `.BRAIN/05-technical/backend/achievement-system.md`
- `.BRAIN/05-technical/backend/notification-system.md`

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `API-SWAGGER/tasks/active/queue/task-129-loot-system-api.md`
- `API-SWAGGER/tasks/active/queue/task-214-inventory-advanced-api.md`

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API

- **–§–∞–π–ª:** `api/v1/loot/loot-advanced.yaml`
- **–í–µ—Ä—Å–∏—è API:** v1
- **–§–æ—Ä–º–∞—Ç:** OpenAPI 3.0.3 (REST + Events)

```
API-SWAGGER/api/v1/loot/
 ‚îú‚îÄ‚îÄ loot-generation.yaml      (core Part 1)
 ‚îî‚îÄ‚îÄ loot-advanced.yaml        ‚Üê —Å–æ–∑–¥–∞—Ç—å/–∑–∞–ø–æ–ª–Ω–∏—Ç—å
```

---

## üèóÔ∏è –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

### Backend
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** gameplay-service (loot module)
- **–ü–æ—Ä—Ç:** 8083
- **API Base Path:** `/api/v1/loot`
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
  - auth-service ‚Äì —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤
  - party-service ‚Äì —Å–æ—Å—Ç–∞–≤ –≥—Ä—É–ø–ø
  - inventory-service ‚Äì –≤—ã–¥–∞—á–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
  - economy-service ‚Äì –æ—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏/–Ω–∞–ª–æ–≥–∏
  - achievement-service ‚Äì –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –±–æ—Åc–æ–≤—ã—Ö –Ω–∞–≥—Ä–∞–¥
  - notification-service ‚Äì —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–æ–ª–ª–∞—Ö, –ø–æ–±–µ–¥–∏—Ç–µ–ª—è—Ö

### Frontend
- **–ú–æ–¥—É–ª—å:** `modules/gameplay/loot`
- **State Store:** `useLootStore`
- **State:** `nearbyDrops`, `activeRolls`, `history`, `settings`, `bossLoot`, `filters`
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** `LootDropList`, `NeedGreedPanel`, `SmartLootSettings`, `BossLootSummary`, `LootHistory`, `BadLuckIndicator`
- **–§–æ—Ä–º—ã:** `RollSubmissionForm`, `AutoLootSettingsForm`, `LootFilterForm`
- **Layouts:** `GameLayout`
- **–•—É–∫–∏:** `useLootRolls`, `useSmartLoot`, `useLootHistory`, `useBadLuckProtection`

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è YAML

```yaml
# Target Architecture:
# - Microservice: gameplay-service (port 8083)
# - API Base: /api/v1/loot
# - Dependencies: auth, party, inventory, economy, achievement, notification
# - Frontend Module: modules/gameplay/loot (useLootStore)
# - UI: LootDropList, NeedGreedPanel, SmartLootSettings, BossLootSummary, LootHistory, BadLuckIndicator
# - Forms: RollSubmissionForm, AutoLootSettingsForm, LootFilterForm
# - Hooks: useLootRolls, useSmartLoot, useLootHistory, useBadLuckProtection
```

---

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å (–¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω)

1. –†–∞—Å—à–∏—Ä–∏—Ç—å –º–æ–¥–µ–ª–∏ –ª—É—Ç–∞: roll entries, smart loot metadata, boss loot —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
2. –û–ø–∏—Å–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–æ–ª–ª–æ–≤ (start, submit, resolve), –∏—Å—Ç–æ—Ä–∏—é, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–ª—É—Ç–∞.
3. –í–Ω–µ—Å—Ç–∏ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∞–Ω—Ç–∏-–¥—é–ø–æ–≤ –∏ bad luck protection, –≤–∫–ª—é—á–∞—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å.
4. –û–ø–∏—Å–∞—Ç—å –≤—ã–¥–∞—á—É –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥ (boss loot) –∏ party —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ.
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–±—ã—Ç–∏—è event bus (roll started, roll completed, loot assigned).
6. –£–∫–∞–∑–∞—Ç—å –ª–∏–º–∏—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ (60 —Å–µ–∫ –Ω–∞ roll), –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–æ–ª–µ–π, —Ç–∞–π–º–µ—Ä—ã.
7. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã JSON –¥–ª—è roll submissions, boss loot, smart loot.
8. –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—ë–º, –∞—á–∏–≤–∫–∞–º–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏, analytics.
9. –ü—Ä–æ–π—Ç–∏ —á–µ–∫–ª–∏—Å—Ç –∏ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞–Ω.

---

## üîÄ Endpoints

1. **GET `/api/v1/loot/drops/nearby`** ‚Äì —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –ª—É—Ç–∞ —Ä—è–¥–æ–º —Å –∏–≥—Ä–æ–∫–æ–º/–≥—Ä—É–ø–ø–æ–π.
2. **POST `/api/v1/loot/drops/{dropId}/claim`** ‚Äì –Ω–∞—á–∞—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥—Ä–æ–ø–∞ (Need/Greed/Auto).
3. **GET `/api/v1/loot/rolls/{rollId}`** ‚Äì –ø–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–æ–ª–ª–∞ (—É—á–∞—Å—Ç–Ω–∏–∫–∏, —Ç–∞–π–º–µ—Ä, —Å—Ç–∞–≤–∫–∏).
4. **POST `/api/v1/loot/rolls/{rollId}/submit`** ‚Äì –æ—Ç–ø—Ä–∞–≤–∏—Ç—å Need/Greed/Pass/Auto —Å—Ç–∞–≤–∫—É.
5. **POST `/api/v1/loot/rolls/{rollId}/resolve`** ‚Äì –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–æ–ª–ª (–ø–∞—Ç–∏ –ª–∏–¥–µ—Ä, —Ç–∞–π–º–µ—Ä –∏—Å—Ç—ë–∫).
6. **GET `/api/v1/loot/rolls/active`** ‚Äì —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–æ–ª–ª–æ–≤ –∏–≥—Ä–æ–∫–∞.
7. **GET `/api/v1/loot/settings`** ‚Äì –ø–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ smart loot/auto loot.
8. **PUT `/api/v1/loot/settings`** ‚Äì –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–¥–∫–æ—Å—Ç—å, –∫–ª–∞—Å—Å–æ–≤—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è).
9. **GET `/api/v1/loot/boss/{bossId}`** ‚Äì –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∏ —Å–ª—É—á–∞–π–Ω–æ–º –±–æ—Åc–æ–≤–æ–º –ª—É—Ç–µ.
10. **POST `/api/v1/loot/boss/{bossId}/distribute`** ‚Äì —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –±–æ—Åc–æ–≤—ã–π –¥—Ä–æ–ø (party –∏–ª–∏ solo).
11. **GET `/api/v1/loot/history`** ‚Äì –∂—É—Ä–Ω–∞–ª –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤, —Ä–æ–ª–ª–æ–≤, –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä—ã).
12. **GET `/api/v1/loot/bad-luck`** ‚Äì —Å–æ—Å—Ç–æ—è–Ω–∏–µ bad luck protection (–ø–æ—Å–ª–µ–¥–Ω–∏–π legendary, –ø—Ä–æ–≥—Ä–µ—Å—Å).
13. **POST `/api/v1/loot/duplicate-check`** ‚Äì –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–∞ (inventory + bank) –ø–µ—Ä–µ–¥ –≤—ã–¥–∞—á–µ–π.
14. **POST `/api/v1/loot/admin/reroll`** ‚Äì –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –Ω–∞ –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (audit).
15. **WS `/api/v1/loot/stream`** ‚Äì —Å–æ–±—ã—Ç–∏—è: `roll-started`, `roll-updated`, `roll-completed`, `loot-assigned`, `bad-luck-triggered`, `duplicate-blocked`.

---

## üß± –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

- **LootDrop** ‚Äì `dropId`, `source` (`BOSS|CHEST|WORLD`), `items[]`, `expiresAt`, `location`, `partyId`.
- **LootRoll** ‚Äì `rollId`, `dropId`, `items[]`, `participants[]`, `status`, `expiresAt`, `winner`, `rollHistory[]`.
- **RollSubmission** ‚Äì `rollType` (`NEED|GREED|PASS|AUTO`), `value`, `bonus`, `submittedAt`.
- **SmartLootSetting** ‚Äì `classPreferences`, `minRarity`, `autoAssign`, `blacklist`.
- **BossLootInfo** ‚Äì `guaranteedItems[]`, `randomTable`, `partyDistribution`, `achievements[]`.
- **BadLuckProtection** ‚Äì `lastLegendaryAt`, `protectionActive`, `nextGuaranteedIn`, `progress`.
- **DuplicateCheckResponse** ‚Äì `hasDuplicate`, `locations[]`, `suggestedAction`.
- **LootHistoryEntry** ‚Äì `timestamp`, `item`, `rarity`, `source`, `rollType`, `rollValue`, `participants`, `result`.
- **RealtimeEventPayload** ‚Äì —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ payloads (rollStarted, rollUpdated, rollCompleted, lootAssigned, badLuckTriggered, duplicateBlocked).
- **Error Schema (`LootAdvancedError`)** ‚Äì codes (`ROLL_EXPIRED`, `PARTY_REQUIRED`, `NEED_NOT_ALLOWED`, `DUPLICATE_FOUND`, `BOSS_LOCKED`, `BAD_LUCK_INACTIVE`).

---

## üß≠ –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ø—Ä–∞–≤–∏–ª–∞

- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: `BearerAuth`; `ServiceToken` –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤ (loot generator).
- –¢–∞–π–º–µ—Ä—ã: roll –¥–ª–∏—Ç—Å—è 60 —Å–µ–∫, auto-submit PASS –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏.
- Anti-abuse: Need –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∫–ª–∞—Å—Å–æ–≤ (smart loot –ø—Ä–æ–≤–µ—Ä–∫–∏).
- Bad luck: –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π legendary –∫–∞–∂–¥—ã–µ X —á–∞—Å–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã.
- –î—É–±–ª–∏–∫–∞—Ç—ã: –ø–µ—Ä–µ–¥ –≤—ã–¥–∞—á–µ–π legendary –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å/–±–∞–Ω–∫, –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ ‚Üí –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞.
- –õ–æ–≥–∏: –≤—Å–µ —Ä–æ–ª–ª—ã/—Ä–µ—à–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –∞—É–¥–∏—Ç–∞ (anti-cheat).
- Events: –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å `loot:roll-completed`, `loot:bad-luck-triggered`.
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: `settings`, `bad-luck` ‚Äì –Ω–∏–∑–∫–æ–µ (max-age=5); `history` –ø–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω.

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã

- –†–æ–ª–ª Need/Greed: JSON –∑–∞–ø—Ä–æ—Å –Ω–∞ submit —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º.
- –û—Ç–≤–µ—Ç boss loot distribution (–≥–∞—Ä–∞–Ω—Ç–∏–∏ + shared drop).
- –°–æ–±—ã—Ç–∏–µ WebSocket `roll-completed` —Å –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–º –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏.
- Bad luck status –ø–æ—Å–ª–µ 7 –¥–Ω–µ–π –±–µ–∑ legendary.
- –î—É–±–ª–∏–∫–∞—Ç —á–µ–∫ –¥–ª—è legendary –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞.

---

## üîó –°–≤—è–∑–Ω–æ—Å—Ç–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –¢—Ä–µ–±—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `API-TASK-129` (core loot) –∏ `API-TASK-214` (inventory advanced).
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å party-service, achievement-service, notification-service.
- –°–æ–±—ã—Ç–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã progression/analytics –¥–ª—è –º–µ—Ç—Ä–∏–∫.

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

1. –§–∞–π–ª `loot-advanced.yaml` —Å–æ–∑–¥–∞–Ω, –≤–∫–ª—é—á–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏ –≤—Å–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã.
2. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–æ–¥–µ–ª–∏ —Ä–æ–ª–ª–æ–≤, smart loot, boss loot, bad luck, –¥—É–±–ª–∏–∫–∞—Ç–æ–≤.
3. –ü—Ä–æ–ø–∏—Å–∞–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ –∞–Ω—Ç–∏-–∞–±—É–∑–∞, —Ç–∞–π–º–µ—Ä—ã, —Å–æ–±—ã—Ç–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
4. –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ –æ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç –∫–ª—é—á–µ–≤—ã–µ –∫–µ–π—Å—ã.
5. –ß–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω, –∑–∞–¥–∞–Ω–∏–µ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

---

## üìé Checklist

- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —à–∞–±–ª–æ–Ω `api-generation-task-template.md`
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –º–æ–¥—É–ª—å, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ —Å–æ–±—ã—Ç–∏—è –ø–æ–∫—Ä—ã–≤–∞—é—Ç –¥–æ–∫—É–º–µ–Ω—Ç Part 2
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –º–æ–¥–µ–ª–∏, –æ—à–∏–±–∫–∏, –ø—Ä–∏–º–µ—Ä—ã, –∫—Ä–∏—Ç–µ—Ä–∏–∏
- [ ] –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±–Ω–æ–≤–∏—Ç—å `tasks/config/brain-mapping.yaml`

---

## ‚ùìFAQ

**Q:** –ú–æ–∂–Ω–æ –ª–∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å core loot API?
**A:** –ù–µ—Ç, —á—Ç–æ–±—ã —Ä–∞–∑–¥–µ–ª–∏—Ç—å –±–∞–∑–æ–≤—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏, –∞ —Ç–∞–∫–∂–µ —É–ª–æ–∂–∏—Ç—å—Å—è –≤ –ª–∏–º–∏—Ç 400 —Å—Ç—Ä–æ–∫.

**Q:** –ö—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–æ–ª–ª?
**A:** Party leader –∏–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –ø–æ —Ç–∞–π–º–µ—Ä—É. API –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–æ–ª—å –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ.

**Q:** –ö–∞–∫ —É–≤–µ–¥–æ–º–ª—è—Ç—å –æ bad luck –∑–∞—â–∏—Ç–µ?
**A:** –ß–µ—Ä–µ–∑ websocket —Å–æ–±—ã—Ç–∏–µ `bad-luck-triggered` + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏–∑ notification-service.


