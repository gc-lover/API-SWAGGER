# Task ID: API-TASK-232
**–¢–∏–ø:** API Generation
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≤—ã—Å–æ–∫–∏–π
**–°—Ç–∞—Ç—É—Å:** queued
**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-08 05:40
**–°–æ–∑–¥–∞—Ç–µ–ª—å:** GPT-5 Codex (API Task Creator)
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** API-TASK-228, API-TASK-230, API-TASK-215

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤–æ–π –ø–æ—á—Ç–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã: –æ—Ç–ø—Ä–∞–≤–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ –ø–∏—Å–µ–º, –≤–ª–æ–∂–µ–Ω–∏—è, COD, —Å–∏—Å—Ç–µ–º–Ω–∞—è –ø–æ—á—Ç–∞, –∏—Å—Ç–µ—á–µ–Ω–∏–µ —Å—Ä–æ–∫–∞, –∂—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–π.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:** –°–æ–∑–¥–∞—Ç—å `api/v1/mail/mail-system.yaml`, –æ–ø–∏—Å–∞–≤ REST/WS –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø–æ `.BRAIN/05-technical/backend/mail-system.md`.

---

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è

–û–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–π –ø–æ—á—Ç–æ–≤—ã–π –±—ç–∫–µ–Ω–¥ –¥–ª—è –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—Å—ã–ª–∫–∏ –∏ –Ω–∞–≥—Ä–∞–¥—ã.

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏, —ç–∫–æ–Ω–æ–º–∏–∫—É –∏ –Ω–∞–≥—Ä–∞–¥—ã —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤—É—é –ø–æ—á—Ç—É
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É –ø—Ä–µ–¥–º–µ—Ç–æ–≤/–≤–∞–ª—é—Ç—ã, –≤–∫–ª—é—á–∞—è COD –∏ –≤–æ–∑–≤—Ä–∞—Ç—ã
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, —Å–æ–±—ã—Ç–∏—è, –∫–≤–µ—Å—Ç—ã, GM –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å UI –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –æ–±–æ –≤—Å–µ—Ö –ø–∏—Å—å–º–∞—Ö

---

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç

**–ü—É—Ç—å:** `.BRAIN/05-technical/backend/mail-system.md`
**–í–µ—Ä—Å–∏—è:** v1.0.0 (2025-11-07)
**–°—Ç–∞—Ç—É—Å:** approved, api-readiness: ready

**–ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–¥–µ–ª—ã:**
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º (–∏–≥—Ä–æ–∫–∏, —Å–∏—Å—Ç–µ–º–∞, GM)
- –í–ª–æ–∂–µ–Ω–∏—è: –ø—Ä–µ–¥–º–µ—Ç—ã, –≤–∞–ª—é—Ç–∞, COD, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- Inbox/Outbox, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä—ã
- –ò—Å—Ç–µ—á–µ–Ω–∏–µ –ø–∏—Å–µ–º, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–≤—Ä–∞—Ç—ã, –ª–æ–≥–∏–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∏—Å—å–º–∞, –º–∞—Å—Å–æ–≤—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏, —à–∞–±–ª–æ–Ω—ã
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –∞–Ω—Ç–∏—Å–ø–∞–º, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

- `.BRAIN/05-technical/backend/friend-system.md`
- `.BRAIN/05-technical/backend/notification-system.md`
- `.BRAIN/05-technical/backend/loot-system/part2-advanced-loot.md`
- `.BRAIN/05-technical/backend/economy-system.md`
- `.BRAIN/05-technical/backend/support/support-ticket-system.md`
- `.BRAIN/05-technical/backend/admin/admin-tools-core.md`

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `API-SWAGGER/tasks/active/queue/task-228-friend-system-api.md`
- `API-SWAGGER/tasks/active/queue/task-230-notification-system-api.md`
- `API-SWAGGER/tasks/active/queue/task-215-loot-advanced-api.md`

---

## üìÅ –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API

- **–§–∞–π–ª:** `api/v1/mail/mail-system.yaml`
- **–í–µ—Ä—Å–∏—è API:** v1
- **–§–æ—Ä–º–∞—Ç:** OpenAPI 3.0.3

```
API-SWAGGER/api/v1/mail/
 ‚îú‚îÄ‚îÄ mail-system.yaml       ‚Üê —Å–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å
 ‚îú‚îÄ‚îÄ mail-components.yaml
 ‚îî‚îÄ‚îÄ mail-examples.yaml
```

---

## üèóÔ∏è –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

### Backend
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å:** mail-service (—á–∞—Å—Ç—å social-service –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å)
- **–ü–æ—Ä—Ç:** 8094
- **API Base Path:** `/api/v1/mail`
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
  - auth-service ‚Äì –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ–π/–ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
  - inventory-service ‚Äì –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
  - economy-service ‚Äì –ø–µ—Ä–µ–≤–æ–¥ –≤–∞–ª—é—Ç—ã, COD
  - notification-service ‚Äì —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –ø–∏—Å—å–º–∞—Ö
  - analytics-service ‚Äì —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–æ–∫, –ø–æ–ª—É—á–µ–Ω–∏—è
  - moderation-service ‚Äì —Ñ–∏–ª—å—Ç—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –∂–∞–ª–æ–±—ã
  - template-service ‚Äì —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∏—Å—å–º–∞, –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
  - support-service ‚Äì –∂–∞–ª–æ–±—ã, —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

### Frontend
- **–ú–æ–¥—É–ª—å:** `modules/social/mail`
- **State Store:** `useMailStore`
- **State:** `inbox`, `outbox`, `selectedMail`, `attachments`, `filters`, `unreadCount`
- **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** `MailInbox`, `MailViewer`, `MailComposer`, `MailAttachmentList`, `CODSummary`, `MailFilters`
- **–§–æ—Ä–º—ã:** `MailComposeForm`, `CODForm`, `AttachmentPickerForm`, `MailSearchForm`
- **–•—É–∫–∏:** `useMail`, `useMailComposer`, `useMailFilters`, `useMailNotifications`

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è YAML

```yaml
# Target Architecture:
# - Microservice: mail-service (port 8094)
# - API Base: /api/v1/mail
# - Dependencies: auth, inventory, economy, notification, analytics, moderation, template, support
# - Frontend Module: modules/social/mail (useMailStore)
# - UI: MailInbox, MailViewer, MailComposer, MailAttachmentList, CODSummary, MailFilters
# - Forms: MailComposeForm, CODForm, AttachmentPickerForm, MailSearchForm
# - Hooks: useMail, useMailComposer, useMailFilters, useMailNotifications
```

---

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å (–¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω)

1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–¥–µ–ª–∏ –ø–∏—Å—å–º–∞, –≤–ª–æ–∂–µ–Ω–∏–π, COD, —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–æ—Å—Ç–∞–≤–∫–∏, –∂—É—Ä–Ω–∞–ª–æ–≤.
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º, –≤–ª–æ–∂–µ–Ω–∏–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ COD.
3. –û–ø–∏—Å–∞—Ç—å inbox/outbox, —Ñ–∏–ª—å—Ç—Ä—ã, –ø–∞–≥–∏–Ω–∞—Ü–∏—é, –ø–æ–∏—Å–∫.
4. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–ª—É—á–µ–Ω–∏—è –≤–ª–æ–∂–µ–Ω–∏–π, –≤–æ–∑–≤—Ä–∞—Ç–æ–≤, –∏—Å—Ç–µ—á–µ–Ω–∏—è.
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∏—Å—å–º–∞, GM/–∞–¥–º–∏–Ω –æ–ø–µ—Ä–∞—Ü–∏–∏, —à–∞–±–ª–æ–Ω—ã.
6. –î–æ–±–∞–≤–∏—Ç—å WebSocket —Å–æ–±—ã—Ç–∏—è –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –ø–∏—Å—å–º–∞—Ö.
7. –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –∞–Ω—Ç–∏—Å–ø–∞–º, –ª–∏–º–∏—Ç—ã, moderation hooks.
8. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã, —á–µ–∫–ª–∏—Å—Ç –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏.

---

## üîÄ Endpoints

1. **GET `/api/v1/mail/inbox`** ‚Äì —Å–ø–∏—Å–æ–∫ –≤—Ö–æ–¥—è—â–∏—Ö –ø–∏—Å–µ–º (—Ñ–∏–ª—å—Ç—Ä—ã: unread, attachments, system, from).
2. **GET `/api/v1/mail/outbox`** ‚Äì –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–∏—Å—å–º–∞, —Å—Ç–∞—Ç—É—Å –¥–æ—Å—Ç–∞–≤–∫–∏.
3. **GET `/api/v1/mail/{mailId}`** ‚Äì –¥–µ—Ç–∞–ª–∏ –ø–∏—Å—å–º–∞, –≤–ª–æ–∂–µ–Ω–∏—è, COD, –∏—Å—Ç–æ—Ä–∏—è.
4. **POST `/api/v1/mail`** ‚Äì –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ (–∞–¥—Ä–µ—Å–∞—Ç—ã, —Ç–µ–º–∞, —Ç–µ–∫—Å—Ç, –≤–ª–æ–∂–µ–Ω–∏—è, COD).
5. **POST `/api/v1/mail/{mailId}/attachments/claim`** ‚Äì –∑–∞–±—Ä–∞—Ç—å –≤–ª–æ–∂–µ–Ω–∏—è (–ø—Ä–µ–¥–º–µ—Ç—ã, –≤–∞–ª—é—Ç–∞).
6. **POST `/api/v1/mail/{mailId}/cod/pay`** ‚Äì –æ–ø–ª–∞—Ç–∏—Ç—å COD –∏ –∑–∞–±—Ä–∞—Ç—å –≤–ª–æ–∂–µ–Ω–∏—è.
7. **POST `/api/v1/mail/{mailId}/return`** ‚Äì –≤–µ—Ä–Ω—É—Ç—å –ø–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é (–µ—Å–ª–∏ –Ω–µ –∑–∞–±—Ä–∞–ª–∏).
8. **DELETE `/api/v1/mail/{mailId}`** ‚Äì —É–¥–∞–ª–∏—Ç—å –ø–∏—Å—å–º–æ (soft delete, audit).
9. **POST `/api/v1/mail/{mailId}/flag`** ‚Äì –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è/–æ—Ç–º–µ—Ç–∏—Ç—å –ø–∏—Å—å–º–æ (moderation).
10. **GET `/api/v1/mail/settings`** ‚Äì –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ñ–∏–ª—å—Ç—Ä—ã, –∞–≤—Ç–æ-accept COD, –∞–≤—Ç–æ-delete).
11. **PUT `/api/v1/mail/settings`** ‚Äì –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫.
12. **POST `/api/v1/mail/system`** ‚Äì —Å–∏—Å—Ç–µ–º–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ (GM/Admin; —Å–µ–≥–º–µ–Ω—Ç—ã, —à–∞–±–ª–æ–Ω—ã).
13. **POST `/api/v1/mail/system/batch`** ‚Äì –º–∞—Å—Å–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ (batch/async, audit).
14. **GET `/api/v1/mail/history`** ‚Äì –∂—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–π (–æ—Ç–ø—Ä–∞–≤–∫–∞, –ø–æ–ª—É—á–µ–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—Ç—ã).
15. **POST `/api/v1/mail/{mailId}/read`** ‚Äì –ø–æ–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ.
16. **GET `/api/v1/mail/stats`** ‚Äì —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏—Å–µ–º, COD success, attachments).
17. **POST `/api/v1/mail/{mailId}/resend`** ‚Äì –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ (–µ—Å–ª–∏ –Ω–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ).
18. **WS `/api/v1/mail/stream`** ‚Äì —Å–æ–±—ã—Ç–∏—è: `mail-received`, `mail-read`, `mail-returned`, `attachment-claimed`, `cod-paid`, `mail-flagged`.

---

## üß± –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

- **Mail** ‚Äì `mailId`, `senderId`, `senderName`, `recipientId`, `subject`, `body`, `channel`, `isSystem`, `isCOD`, `codAmount`, `status`, `sentAt`, `expiresAt`.
- **Attachment** ‚Äì `attachmentId`, `type` (`ITEM|CURRENCY|TOKEN`), `itemId`, `quantity`, `metadata`.
- **MailStatus** ‚Äì `state` (`SENT|DELIVERED|READ|CLAIMED|RETURNED|EXPIRED`), `timestamps`.
- **CODInfo** ‚Äì `amount`, `currency`, `paid`, `paidAt`, `payerId`, `autoAccept`.
- **MailSettings** ‚Äì `autoDeleteExpired`, `autoAcceptCOD`, `blockedSenders`, `filters`.
- **MailHistoryEntry** ‚Äì `event`, `actor`, `timestamp`, `details`.
- **SystemMailRequest** ‚Äì `templateId`, `locale`, `recipients`, `segments`, `attachments`, `schedule`.
- **RealtimeEventPayload** ‚Äì `mailReceived`, `mailRead`, `mailReturned`, `attachmentClaimed`, `codPaid`, `mailFlagged`.
- **Error Schema (`MailError`)** ‚Äì codes (`MAILBOX_FULL`, `ATTACHMENT_INVALID`, `COD_REQUIRED`, `COD_FAILED`, `MAIL_EXPIRED`, `RATE_LIMIT`, `ATTACHMENT_LOCKED`, `SPAM_BLOCKED`).

---

## üß≠ –ü—Ä–∏–Ω—Ü–∏–ø—ã –∏ –ø—Ä–∞–≤–∏–ª–∞

- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: `BearerAuth`; GM/Admin –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç `GMToken`; —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏ ‚Äì `ServiceToken` —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏.
- Rate Limits: –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏—Å–µ–º, –≤–ª–æ–∂–µ–Ω–∏–π, —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫.
- Anti-spam: —Ñ–∏–ª—å—Ç—Ä—ã, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤, cooldown.
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –Ω–∞ tradeable/locked, —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è.
- Idempotency: –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º —Å `idempotencyKey` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–µ–π.
- Compliance: –≤–µ—Å—Ç–∏ –∂—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–π (audit), –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.
- Localization: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å template-service; –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –≤ API.

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã

- –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ —Å 3 –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ –∏ COD –æ–ø–ª–∞—Ç–æ–π, –ø–æ—Å–ª–µ–¥—É—é—â–µ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ.
- –°–∏—Å—Ç–µ–º–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –Ω–∞–≥—Ä–∞–¥ –∑–∞ —ç–≤–µ–Ω—Ç —Å–æ –≤–ª–æ–∂–µ–Ω–∏—è–º–∏ –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π.
- –ñ–∞–ª–æ–±–∞ –Ω–∞ –ø–∏—Å—å–º–æ —Å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è.
- –í–æ–∑–≤—Ä–∞—Ç –ø–∏—Å—å–º–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞.
- WebSocket —Å–æ–±—ã—Ç–∏–µ `mail-received` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º.

---

## üîó –°–≤—è–∑–Ω–æ—Å—Ç–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å friend, notification, loot, economy, support, analytics.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è UI `MailInbox`, `MailComposer`; –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—É–ø–∞—é—Ç –≤ achievements (mail milestones).
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç GM/Support –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞.

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

1. `mail-system.yaml` –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É, –ø–æ–ª—É—á–µ–Ω–∏–µ, COD, —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∏—Å—å–º–∞, –∏—Å—Ç–æ—Ä–∏—é.
2. –û–ø–∏—Å–∞–Ω—ã –º–æ–¥–µ–ª–∏, —Å–æ–±—ã—Ç–∏—è, –æ—à–∏–±–∫–∏, –∑–∞—â–∏—Ç–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
3. –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, rate limits, audit, —Ä–µ–≥—É–ª—è—Ç–æ—Ä–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.
4. –ü—Ä–∏–º–µ—Ä—ã –∏ —Ç–µ—Å—Ç-–∫–µ–π—Å—ã –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã, —á–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω.

---

## üìé Checklist

- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —à–∞–±–ª–æ–Ω `api-generation-task-template.md`
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å, UI –º–æ–¥—É–ª—å, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ —Å–æ–±—ã—Ç–∏—è –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ—á—Ç–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –º–æ–¥–µ–ª–∏, –æ—à–∏–±–∫–∏, –ø—Ä–∏–º–µ—Ä—ã, –∫—Ä–∏—Ç–µ—Ä–∏–∏
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `tasks/config/brain-mapping.yaml`

---

## ‚ùìFAQ

**Q:** –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ª–∏ –≤–ª–æ–∂–µ–Ω–∏—è-—Å—Ç—ç–∫–∏?**
**A:** –î–∞, –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å `quantity` –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞; –æ–ø–∏—Å–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è.

**Q:** –ù—É–∂–Ω–æ –ª–∏ –∞–≤—Ç–æ-—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ø–∏—Å–µ–º?**
**A:** –î–∞, —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å cron/cleanup, —É–≤–µ–¥–æ–º–ª—è—Ç—å –∏–≥—Ä–æ–∫–∞ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –¥–æ —É–¥–∞–ª–µ–Ω–∏—è (—á–µ—Ä–µ–∑ notification-service).


