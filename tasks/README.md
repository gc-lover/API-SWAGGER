# Система заданий для агентов в API-SWAGGER

Система для преобразования документов из `.BRAIN` в задания для агентов-исполнителей в `API-SWAGGER`.

---

## Цель системы

Преобразование концепций и документов из `.BRAIN` в полные задания для создания API спецификаций в `API-SWAGGER`.

**Цепочка работы:**
1. Документы в `.BRAIN` описывают концепции игры
2. AI создатель заданий читает `.BRAIN` и создает задания
3. Агенты-исполнители выполняют задания и создают API спецификации
4. Бекенд и фронтенд используют API спецификации для реализации

---

## Структура

```
tasks/
├── README.md                          # Этот файл
├── templates/
│   └── api-generation-task-template.md # Шаблон задания для агента-исполнителя
├── config/
│   ├── task-creation-guide.md         # Инструкция для AI создателя заданий
│   ├── checklist.md                   # Чеклист проверки задания
│   └── brain-mapping.yaml             # Маппинг .BRAIN документов -> задания
├── active/
│   ├── queue/                          # Очередь заданий (готовы к выполнению)
│   └── in-progress/                    # Задания в работе
└── completed/                          # Завершенные задания
```

---

## Рабочий процесс

### 1. Создание задания

**Кто:** AI создатель заданий (AI Agent)

**Входные данные:**
1. ПРАВИЛО: `API-SWAGGER/.cursor/rules/api-task-creator-rules.mdc`
2. ИНСТРУКЦИЯ: `tasks/config/task-creation-guide.md`
3. ДОКУМЕНТ из `.BRAIN`: Путь к файлу с фичей для проработки

**Процесс:**
1. Прочитать документ из `.BRAIN`
2. Извлечь всю необходимую информацию
3. Создать полное задание по шаблону
4. Проверить по чеклисту
5. Сохранить в `tasks/active/queue/`
6. Обновить `brain-mapping.yaml`
7. Обновить документ `.BRAIN` (отметить что задание создано)

**Результат:**
- Файл задания в `tasks/active/queue/task-XXX-description.md`
- Запись в `brain-mapping.yaml`
- Обновление документа `.BRAIN`

---

### 2. Выполнение задания

**Кто:** Агент-исполнитель (AI Agent)

**Входные данные:**
- Файл задания из `tasks/active/queue/` или `tasks/active/in-progress/`

**Процесс:**
1. Прочитать задание полностью
2. Следовать детальному плану из задания
3. Создать API спецификацию в `api/v1/.../`
4. Проверить по критериям приемки
5. Переместить задание в `tasks/completed/`
6. Обновить `brain-mapping.yaml` (статус: completed)

**Результат:**
- API спецификация в `api/v1/.../filename.yaml`
- Задание в `tasks/completed/`
- Обновление `brain-mapping.yaml`

---

## Структура задания

Задание должно содержать:

1. **Метаданные:** ID, тип, приоритет, статус, зависимости
2. **Описание:** Краткое и детальное описание цели
3. **Источники:** Документы из `.BRAIN` с версиями и статусами
4. **Целевая структура:** Путь к файлу API, версия, структура директории
5. **Детальный план:** Пошаговый план выполнения (минимум 5 шагов)
6. **Endpoints:** Детальное описание всех endpoints
7. **Модели данных:** Детальное описание всех моделей
8. **Принципы и правила:** Принципы проекта, стандарты, правила стиля
9. **Примеры:** Примеры структур, запросов, ответов
10. **Связности:** Зависимости от других API и заданий
11. **Критерии приемки:** Чеклист из 10+ пунктов
12. **FAQ:** Ответы на типичные вопросы

**Важно:** Задание должно быть самодостаточным - агент-исполнитель может работать только по нему, без дополнительных обращений к `.BRAIN` документам.

---

## Отслеживание заданий

### Файл маппинга: `config/brain-mapping.yaml`

Отслеживает связи между документами `.BRAIN` и заданиями в `API-SWAGGER`.

**Структура записи:**
```yaml
mappings:
  - source: ".BRAIN/02-gameplay/combat/shooter-mechanics.md"
    target: "api/v1/gameplay/combat/shooting.yaml"
    task_id: "API-TASK-001"
    task_file: "tasks/active/queue/task-001-shooting-api.md"
    status: "queued"
    created: "2025-11-02 15:30"
    version: "v1.0.0"
    updated: "2025-11-02 15:30"
```

### Отметка в документах .BRAIN

В каждом документе `.BRAIN` добавляется секция отслеживания заданий:

```markdown
---
**API Tasks Status:**
- Status: created | in_progress | completed
- Tasks:
  - API-TASK-001: api/v1/gameplay/combat/shooting.yaml (2025-11-02)
- Last Updated: 2025-11-02 15:30
---
```

---

## Статусы заданий

- **queued** - задание в очереди, готово к выполнению
- **assigned** - задание назначено агенту
- **in_progress** - задание выполняется
- **completed** - задание завершено
- **failed** - задание не выполнено (ошибка)

---

## Типы заданий

- **API Generation** - создание новой API спецификации
- **API Update** - обновление существующей API спецификации
- **API Validation** - валидация и проверка API спецификации

---

## Приоритеты заданий

- **критический** - блокирует другие задачи
- **высокий** - важная функциональность
- **средний** - обычная задача
- **низкий** - можно отложить

---

## Файлы системы

### Для AI создателя заданий:

- `../.cursor/rules/api-task-creator-rules.mdc` - правила работы
- `config/task-creation-guide.md` - инструкция по созданию заданий
- `config/checklist.md` - чеклист проверки задания
- `templates/api-generation-task-template.md` - шаблон задания

### Для агента-исполнителя:

- `templates/api-generation-task-template.md` - шаблон задания (для понимания структуры)
- Файл задания из `active/queue/` или `active/in-progress/`

---

## Полезные ссылки

- [Шаблон задания](./templates/api-generation-task-template.md)
- [Инструкция создания заданий](./config/task-creation-guide.md)
- [Чеклист проверки](./config/checklist.md)
- [Маппинг .BRAIN -> задания](./config/brain-mapping.yaml)
- [Правила работы](../.cursor/rules/api-task-creator-rules.mdc)
- [OpenAPI Specification](https://swagger.io/specification/)

---

## Принципы работы

1. **Минимальный вход:** правило + инструкция + документ `.BRAIN`
2. **Самодостаточность:** задание содержит всю информацию для работы
3. **Отслеживание:** все связи документируются в маппинге и `.BRAIN`
4. **Полнота:** задание должно быть максимально детальным
5. **Проверяемость:** критерии приемки измеримы и проверяемы

---

## Примеры использования

### Создание задания

1. Открой правила: `API-SWAGGER/.cursor/rules/api-task-creator-rules.mdc`
2. Открой инструкцию: `API-SWAGGER/tasks/config/task-creation-guide.md`
3. Укажи документ: `.BRAIN/02-gameplay/combat/shooter-mechanics.md`
4. Следуй процессу из инструкции
5. Создай задание по шаблону
6. Проверь по чеклисту
7. Сохрани в `tasks/active/queue/`
8. Обнови маппинг и документ `.BRAIN`

### Выполнение задания

1. Прочитай задание из `tasks/active/queue/`
2. Следуй детальному плану из задания
3. Создай API спецификацию
4. Проверь по критериям приемки
5. Перемести задание в `tasks/completed/`
6. Обнови маппинг

---

## История изменений

- `2025-11-02` - Создание системы заданий
