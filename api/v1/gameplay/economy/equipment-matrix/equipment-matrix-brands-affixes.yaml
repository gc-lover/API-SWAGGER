# Equipment Matrix API - Бренды и аффиксы
# Источник: .BRAIN/02-gameplay/economy/equipment-matrix.md (v1.0.0)
# Задание: API-SWAGGER/tasks/active/queue/task-002-equipment-matrix-api.md
# Task ID: API-TASK-002

openapi: 3.0.3
info:
  title: Equipment Matrix - Brands & Affixes
  version: 1.0.0

components:
  schemas:
    # Бренд
    Brand:
      type: object
      required:
        - id
        - name
        - origin
        - signature_bonuses
        - status
        - created_at
        - version
      description: |
        Бренд предметов.
        Источник: .BRAIN/02-gameplay/economy/equipment-matrix.md -> Brand
      properties:
        id:
          type: string
          format: uuid
          description: Уникальный идентификатор бренда
          example: "880e8400-e29b-41d4-a716-446655440001"
        name:
          type: string
          minLength: 1
          maxLength: 100
          description: Название бренда
          example: "Arasaka"
        origin:
          type: string
          enum: [lore, authored, user]
          description: Происхождение бренда (лорный, авторский, пользовательский)
          example: "lore"
        faction_id:
          type: string
          format: uuid
          nullable: true
          description: Идентификатор фракции (опционально)
          example: "990e8400-e29b-41d4-a716-446655440002"
        signature_bonuses:
          type: array
          items:
            type: object
          description: Сигнатурные бонусы (пресеты для статов/аффиксов)
          example: []
        visual_style:
          type: string
          nullable: true
          description: Визуальный стиль (опционально)
          example: "corporate_minimalist"
        status:
          type: string
          enum: [active, suspended, pending]
          description: Статус бренда
          example: "active"
        created_at:
          type: string
          format: date-time
          description: Дата создания
          example: "2025-11-03T20:40:00Z"
        version:
          type: string
          description: Версия бренда
          example: "v1.0.0"

    # Сигнатурные бонусы
    SignatureBonuses:
      type: object
      description: |
        Сигнатурные бонусы бренда.
        Источник: .BRAIN/02-gameplay/economy/equipment-matrix.md -> Brand.signatureBonuses
      properties:
        stat_modifiers:
          type: object
          description: Модификаторы характеристик
          additionalProperties:
            type: number
          example:
            accuracy: 10
            penetration: 5
            noise: -10
        affix_pool_bonus:
          type: object
          nullable: true
          description: Бонусы к пулам аффиксов
          additionalProperties: true
        set_bonus:
          type: object
          nullable: true
          description: Сет-бонусы при наличии нескольких предметов бренда
          additionalProperties: true

    # Аффикс
    Affix:
      type: object
      required:
        - id
        - kind
        - tags
        - values
      description: |
        Модификатор/аффикс предмета.
        Источник: .BRAIN/02-gameplay/economy/equipment-matrix.md -> Affix
      properties:
        id:
          type: string
          format: uuid
          description: Уникальный идентификатор аффикса
          example: "aa0e8400-e29b-41d4-a716-446655440001"
        kind:
          type: string
          enum: [simple, set, unique]
          description: Тип аффикса (простой, сетовой, уникальный)
          example: "simple"
        tags:
          type: array
          items:
            type: string
          description: Теги (weaponClass, damageType, brand и т.д.)
          example: ["weaponClass_pistol", "damageType_kinetic"]
        values:
          type: object
          description: Значения модификаций (изменения характеристик)
          additionalProperties:
            type: number
          example:
            damage: 10
            accuracy: 5
        conditions:
          type: object
          nullable: true
          description: Условия активации (опционально)
          additionalProperties: true
        brand_lock:
          type: string
          nullable: true
          description: Привязка к бренду (опционально)
          example: "arasaka"
        rarity_requirement:
          type: string
          enum: [common, uncommon, rare, epic, legendary, artifact]
          nullable: true
          description: Требование к редкости предмета (опционально)
          example: "rare"

    # Пул аффиксов
    AffixPool:
      type: object
      description: |
        Пул аффиксов для типа предмета.
        Источник: .BRAIN/02-gameplay/economy/equipment-matrix.md -> GenerationRules.affixPoolsByType
      properties:
        item_type:
          type: string
          enum: [weapon, armor, implant, cyberdeck, mod]
          description: Тип предмета
          example: "weapon"
        zone_tag:
          type: string
          nullable: true
          description: Тег зоны (опционально)
          example: "downtown"
        affixes:
          type: array
          items:
            type: object
            properties:
              affix_id:
                type: string
                format: uuid
              weight:
                type: number
                format: float
                minimum: 0
          description: Аффиксы с весами
          example: []

